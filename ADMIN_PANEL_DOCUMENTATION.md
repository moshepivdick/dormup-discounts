# –û–ø–∏—Å–∞–Ω–∏–µ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ DormUp Discounts

## –û–±–∑–æ—Ä

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å DormUp Discounts ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π —Å–∫–∏–¥–æ–∫ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤. –û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º–∏, –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã.

**URL –¥–æ—Å—Ç—É–ø–∞:** `/control/[secret-slug]` (slug –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `ADMIN_PANEL_SLUG`)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞:

1. **–°–µ–∫—Ä–µ—Ç–Ω—ã–π URL slug** ‚Äî –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –ø–æ —Å–∫—Ä—ã—Ç–æ–º—É –ø—É—Ç–∏
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Supabase** ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏** ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å `is_admin: true` –≤ –ø—Ä–æ—Ñ–∏–ª–µ
4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å** ‚Äî cookie `admin_gate` —Å TTL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 120 –º–∏–Ω—É—Ç)
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–ª—é—á–µ–π

### –ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è slug –≤ URL
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Supabase —Å–µ—Å—Å–∏–∏
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–∞ `is_admin` –≤ –ø—Ä–æ—Ñ–∏–ª–µ
4. –ï—Å–ª–∏ –Ω–µ—Ç cookie `admin_gate` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è
5. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è cookie –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–Ω–µ–ª–∏

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (Navigation):

- **Dashboard** (`/control/[slug]`) ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **Users** (`/control/[slug]/users`) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **Venues** (`/control/[slug]/venues`) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º–∏
- **Partners** (`/control/[slug]/partners`) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏
- **Discounts** (`/control/[slug]/discount-uses`) ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∫–∏–¥–æ–∫

### –î–∏–∑–∞–π–Ω:

- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (slate-950/slate-900)
- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π layout —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- Emerald (–∑–µ–ª–µ–Ω—ã–π) –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

## üìä Dashboard (–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

### –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (Overview Stats):

–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–æ—á–µ–∫:

1. **Discounts generated** ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö QR-–∫–æ–¥–æ–≤
2. **Confirmed** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö) —Å–∫–∏–¥–æ–∫
3. **Conversion rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ / –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞–≤–µ–¥–µ–Ω–∏–π) √ó 100

### –ì—Ä–∞—Ñ–∏–∫–∏:

#### 1. Daily Usage (–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- **–¢–∏–ø:** Line Chart (–ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫)
- **–î–∞–Ω–Ω—ã–µ:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö QR-–∫–æ–¥–æ–≤ –ø–æ –¥–Ω—è–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
- **–û—Å—å X:** –î–∞—Ç—ã (—Ñ–æ—Ä–º–∞—Ç: YYYY-MM-DD)
- **–û—Å—å Y:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–¥–æ–≤
- **–ú–µ—Ç—Ä–∏–∫–∞:** `getDiscountsByDay(7)`

#### 2. By Venue (–ü–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º)
- **–¢–∏–ø:** Bar Chart (—Å—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞)
- **–î–∞–Ω–Ω—ã–µ:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–∏–¥–æ–∫ –ø–æ –∫–∞–∂–¥–æ–º—É –∑–∞–≤–µ–¥–µ–Ω–∏—é
- **–û—Å—å X:** –ù–∞–∑–≤–∞–Ω–∏—è –∑–∞–≤–µ–¥–µ–Ω–∏–π
- **–û—Å—å Y:** –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–∏–¥–æ–∫ (–≤–∫–ª—é—á–∞—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ)
- **–ú–µ—Ç—Ä–∏–∫–∞:** `getDiscountsByVenue()`

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `Promise.all()`:
- `getOverviewStats()` ‚Äî –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `getDiscountsByVenue()` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º
- `getDiscountsByDay(7)` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)

---

## üë• Users (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)

### –§—É–Ω–∫—Ü–∏–∏:

#### –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`/control/[slug]/users`)

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å–æ –≤—Å–µ–º–∏ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—Å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é):

**–ö–æ–ª–æ–Ω–∫–∏:**
- **User** ‚Äî email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏ –∏–º—è, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
- **Status** ‚Äî —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Verified / Not verified)
- **Views** ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞–≤–µ–¥–µ–Ω–∏–π
- **QR Codes** ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö QR-–∫–æ–¥–æ–≤
- **Verified** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö) —Å–∫–∏–¥–æ–∫
- **Venues** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **Actions** ‚Äî —Å—Å—ã–ª–∫–∞ "View details" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `getUserActivityStats(userId)`
- –§–∏–ª—å—Ç—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é (views > 0 –∏–ª–∏ QR codes > 0)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)

#### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`/control/[slug]/users/[userId]`)

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (4 –∫–∞—Ä—Ç–æ—á–∫–∏):**
1. **Total Views** ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞–≤–µ–¥–µ–Ω–∏–π
2. **QR Codes** ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö QR-–∫–æ–¥–æ–≤
3. **Verified** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–∫–∏–¥–æ–∫
4. **First Visits** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–µ–¥–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–µ—Ç–∏–ª –≤–ø–µ—Ä–≤—ã–µ

**–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**

##### Venue Views (–ü—Ä–æ—Å–º–æ—Ç—Ä—ã –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º):
- –°–ø–∏—Å–æ–∫ –∑–∞–≤–µ–¥–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–ª
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (–ø–æ —É–±—ã–≤–∞–Ω–∏—é)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ 10 —Ç–æ–ø –∑–∞–≤–µ–¥–µ–Ω–∏—è–º–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

##### QR Codes by Venue (QR-–∫–æ–¥—ã –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º):
- –°–ø–∏—Å–æ–∫ –∑–∞–≤–µ–¥–µ–Ω–∏–π, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª QR-–∫–æ–¥—ã
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è:
  - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö (verified) –∫–æ–¥–æ–≤
  - –§–æ—Ä–º–∞—Ç: "X verified of Y"
- –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –æ–±—â–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–æ–¥–æ–≤

##### Recent Activity (–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å):
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π –ª–æ–≥ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 20 –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  - –ü—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞–≤–µ–¥–µ–Ω–∏–π (Viewed - [Venue Name])
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤ (QR Code - [Venue Name])
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è:
  - –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
  - –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
  - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
  - –°—Ç–∞—Ç—É—Å (–¥–ª—è QR-–∫–æ–¥–æ–≤: confirmed, generated, expired, cancelled)
- –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)

**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π vs –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö
- –ü–æ–¥—Å—á–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –ª–∏–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üè¢ Venues (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º–∏)

### –§—É–Ω–∫—Ü–∏–∏:

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≤–µ–¥–µ–Ω–∏–π (`/control/[slug]/venues`)

**–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
  - –ù–∞–∑–≤–∞–Ω–∏–µ
  - –ì–æ—Ä–æ–¥
  - –ö–∞—Ç–µ–≥–æ—Ä–∏—è
  - –¢–µ–∫—Å—Ç —Å–∫–∏–¥–∫–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è

**–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—è:**
- `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- `city` ‚Äî –≥–æ—Ä–æ–¥
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Cafe", "Restaurant")
- `discountText` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∫–∏–¥–∫–∏

**API:** `POST /api/admin/venues`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ä–º–∞ –æ—á–∏—â–∞–µ—Ç—Å—è
- –°–ø–∏—Å–æ–∫ –∑–∞–≤–µ–¥–µ–Ω–∏–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ UI)

---

## ü§ù Partners (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏)

### –§—É–Ω–∫—Ü–∏–∏:

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ (`/control/[slug]/partners`)

**–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤:**
- Email –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- –ù–∞–∑–≤–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- –ö–∞–∂–¥–æ–º—É –ø–∞—Ä—Ç–Ω–µ—Ä—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ –∑–∞–≤–µ–¥–µ–Ω–∏–µ (1:1)

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞

**–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∫–ª—é—á–∞–µ—Ç:**
- `email` ‚Äî email –¥–ª—è –≤—Ö–æ–¥–∞
- `password` ‚Äî –ø–∞—Ä–æ–ª—å (—Ö—ç—à–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏)
- `venueId` ‚Äî –≤—ã–±–æ—Ä –∑–∞–≤–µ–¥–µ–Ω–∏—è –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞

**API:** `POST /api/admin/partners`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—ã–±–æ—Ä –∑–∞–≤–µ–¥–µ–Ω–∏—è –∏–∑ —Å–ø–∏—Å–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ä–º–∞ –æ—á–∏—â–∞–µ—Ç—Å—è (–∫—Ä–æ–º–µ venueId)
- –°–ø–∏—Å–æ–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–°–≤—è–∑—å —Å –∑–∞–≤–µ–¥–µ–Ω–∏—è–º–∏:**
- –û–¥–∏–Ω –ø–∞—Ä—Ç–Ω–µ—Ä = –æ–¥–Ω–æ –∑–∞–≤–µ–¥–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–æ–≤ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–∫–∏–¥–æ–∫

---

## üìã Discount Uses (–ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∫–∏–¥–æ–∫)

### –§—É–Ω–∫—Ü–∏–∏:

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ (`/control/[slug]/discount-uses`)

**–¢–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π —Å–∫–∏–¥–æ–∫:**

**–ö–æ–ª–æ–Ω–∫–∏:**
- **Code** ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ —Å–∫–∏–¥–∫–∏
- **Venue** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- **Status** ‚Äî —Å—Ç–∞—Ç—É—Å —Å–∫–∏–¥–∫–∏:
  - `generated` ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
  - `confirmed` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω)
  - `expired` ‚Äî –∏—Å—Ç–µ–∫ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
  - `cancelled` ‚Äî –æ—Ç–º–µ–Ω–µ–Ω
- **Created** ‚Äî –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è (ISO format)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–∞–ø–∏—Å–µ–π
- –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å (select –≤–º–µ—Å—Ç–æ include) –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏ –ë–î

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (`lib/stats.ts`):

#### 1. `getOverviewStats()`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
```typescript
{
  totalDiscounts: number,        // –í—Å–µ–≥–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö QR-–∫–æ–¥–æ–≤
  confirmedDiscounts: number,    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö)
  activeVenues: number,          // –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π (isActive: true)
  views: number,                 // –í—Å–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞–≤–µ–¥–µ–Ω–∏–π
  conversionRate: number         // –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
}
```

**–§–æ—Ä–º—É–ª–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏:** `(confirmedDiscounts / views) * 100`

#### 2. `getDiscountsByVenue()`
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º:
```typescript
Array<{
  venueName: string,   // –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
  total: number,       // –í—Å–µ–≥–æ —Å–∫–∏–¥–æ–∫
  confirmed: number    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö
}>
```

**Fallback:** –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–ª–æ–Ω–∫–∏ `avgStudentBill` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç raw SQL –∑–∞–ø—Ä–æ—Å

#### 3. `getDiscountsByDay(days: number = 7)`
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º:
```typescript
Array<{
  date: string,        // –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
  total: number        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤ –∑–∞ –¥–µ–Ω—å
}>
```

#### 4. `getUserActivityStats(userId: string)`
–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```typescript
{
  totalViews: number,                          // –í—Å–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
  totalQrCodes: number,                        // –í—Å–µ–≥–æ QR-–∫–æ–¥–æ–≤
  totalVerified: number,                       // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö
  venueViewCounts: Record<number, number>,     // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º
  venueQrCounts: Record<number, {              // QR-–∫–æ–¥—ã –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º
    generated: number,
    verified: number
  }>,
  firstVisits: number[],                       // ID –∑–∞–≤–µ–¥–µ–Ω–∏–π –ø–µ—Ä–≤—ã—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π
  returnVisits: Array<{                        // –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ—Å–µ—â–µ–Ω–∏—è
    venueId: number,
    venueName: string,
    date: Date
  }>,
  recentViews: ViewWithVenue[],                // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
  recentQrCodes: DiscountUse[]                 // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 QR-–∫–æ–¥–æ–≤
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ `dedupe_key` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω) –∏–ª–∏ –ø–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ `venueId + userId + minuteBucket`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–ª–æ–Ω–∫–∏ `dedupe_key`
- Fallback –Ω–∞ raw SQL –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö Prisma

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏):

- `getPartnerVenueStats(venueId)` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- `getPartnerVenueStatsWithDateRange(venueId, startDate?, endDate?)` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –¥–∞—Ç–∞–º

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoints:

#### Admin API (App Router):
- `GET /api/admin/stats/users?userId=...` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/admin/logout` ‚Äî –≤—ã—Ö–æ–¥ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

#### Admin API (Pages Router, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ fetch):
- `GET /api/admin/venues` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π
- `POST /api/admin/venues` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- `GET /api/admin/venues/[id]` ‚Äî –¥–µ—Ç–∞–ª–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- `PUT /api/admin/venues/[id]` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- `DELETE /api/admin/venues/[id]` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- `GET /api/admin/partners` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- `POST /api/admin/partners` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- `GET /api/admin/partners/[id]` ‚Äî –¥–µ—Ç–∞–ª–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- `PUT /api/admin/partners/[id]` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- `DELETE /api/admin/partners/[id]` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- `GET /api/admin/stats/overview` ‚Äî –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π endpoint)
- `GET /api/admin/stats/by-venue` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π endpoint)
- `GET /api/admin/stats/by-day` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π endpoint)

### –ó–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤:

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `requireAdminAccess(slug)` –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
1. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ slug
2. Supabase —Å–µ—Å—Å–∏—é
3. –§–ª–∞–≥ `is_admin` –≤ –ø—Ä–æ—Ñ–∏–ª–µ
4. Cookie `admin_gate`

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Äî `Promise.all()` –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
2. **–Ø–≤–Ω—ã–π select** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `select` –≤–º–µ—Å—Ç–æ `include` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
3. **Fallback –Ω–∞ raw SQL** ‚Äî –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö Prisma –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π SQL –∑–∞–ø—Ä–æ—Å
4. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Äî —É–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
5. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–∞–ø–∏—Å–µ–π –¥–ª—è discount-uses, 10 –¥–ª—è recent activity

### –ì—Ä–∞—Ñ–∏–∫–∏:

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `react-chartjs-2` —Å Chart.js:
- Bar Chart –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º
- Line Chart –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤ (emerald theme)

---

## üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º—ã:
- **–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:** –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (slate-950, slate-900)
- **–ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç:** Emerald (–∑–µ–ª–µ–Ω—ã–π) –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞:** –ß–µ—Ç–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ –≤–µ—Å–æ–≤ —à—Ä–∏—Ñ—Ç–æ–≤
- **Spacing:** –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∏ padding

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:
- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –¢–∞–±–ª–∏—Ü—ã —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –º–µ—Ç—Ä–∏–∫ (1 –∫–æ–ª–æ–Ω–∫–∞ –Ω–∞ mobile, 3 –Ω–∞ desktop)

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö –∏ —Å—Å—ã–ª–∫–∞—Ö
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (disabled state)
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π

---

## üìù –õ–æ–≥–∏ –∏ –æ—à–∏–±–∫–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

1. **Graceful fallback** ‚Äî –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–ª–æ–Ω–æ–∫ –≤ –ë–î –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
2. **–ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏** ‚Äî –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
4. **–ü—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

1. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π** ‚Äî —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ë–î
2. **–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π** ‚Äî –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ UI
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫** ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º, —Å—Ç–∞—Ç—É—Å–∞–º –∏ —Ç.–¥.
4. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** ‚Äî –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ CSV/Excel
5. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** ‚Äî —Ç–æ–ª—å–∫–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (take: 100)

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏:**
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π
   - –£–¥–∞–ª–µ–Ω–∏–µ/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

2. **–§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫:**
   - –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–∞–º –¥–ª—è discount-uses
   - –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ email
   - –§–∏–ª—å—Ç—Ä –∑–∞–≤–µ–¥–µ–Ω–∏–π –ø–æ –≥–æ—Ä–æ–¥—É/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏

3. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:**
   - –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ CSV
   - –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Å–∫–∏–¥–æ–∫
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
   - Retention rate (–≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
   - –°—Ä–µ–¥–Ω–∏–π —á–µ–∫ –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º
   - –ü–∏–∫–æ–≤—ã–µ —á–∞—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ö
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
   - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –Ω–∞ email

6. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**
   - –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
   - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

### –¢–∏–ø–∏—á–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

**–û–±—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- Total Discounts: 1,247
- Confirmed: 892
- Conversion Rate: 71.5%

**–¢–æ–ø –∑–∞–≤–µ–¥–µ–Ω–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**
- Moka Brew Lab: 156 —Å–∫–∏–¥–æ–∫
- Portico Social Bar: 134 —Å–∫–∏–¥–∫–∏
- Tramonto Piadineria: 98 —Å–∫–∏–¥–æ–∫

**–î–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é:**
- –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫: 45 –∫–æ–¥–æ–≤
- –í—Ç–æ—Ä–Ω–∏–∫: 52 –∫–æ–¥–∞
- –°—Ä–µ–¥–∞: 61 –∫–æ–¥
- ... –∏ —Ç.–¥.

---

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã:

```bash
ADMIN_PANEL_SLUG=your-secret-slug
ADMIN_PANEL_PASSWORD_HASH=bcrypt-hash
ADMIN_GATE_COOKIE_TTL_MINUTES=120  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
NEXT_PUBLIC_SUPABASE_URL=...
NEXT_PUBLIC_SUPABASE_ANON_KEY=...
SUPABASE_SERVICE_ROLE_KEY=...
```

---

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∏ –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é —Å–µ—Ä–≤–∏—Å–∞ —Å–∫–∏–¥–æ–∫ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.
