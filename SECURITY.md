# üîí Security Guide - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

### –§–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞–¥–∞—Ç—å –≤ git!

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **`.gitignore`** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö `.env` —Ñ–∞–π–ª–æ–≤
2. **`.env.example`** - —à–∞–±–ª–æ–Ω –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ (–º–æ–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å)
3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `lib/env.ts` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω:**
   ```bash
   cp .env.example .env
   ```

2. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `.env` –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
   - –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ `your-*` –∏ `change-me-*` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `.env` –≤ `.gitignore`:**
   ```bash
   git check-ignore .env
   # –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: .env
   ```

### Production (Vercel):

1. **Vercel Dashboard** ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **Settings** ‚Üí **Environment Variables**
2. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.example`
3. **–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è production!

## üö® –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç—ã –ø–æ–ø–∞–ª–∏ –≤ git:

### –ï—Å–ª–∏ –≤—ã —Å–ª—É—á–∞–π–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ `.env`:

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã:**
   - –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ JWT secrets
   - –û–±–Ω–æ–≤–∏—Ç–µ Supabase keys (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - –û–±–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ë–î

2. **–£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª –∏–∑ git (–Ω–æ –Ω–µ —Å –¥–∏—Å–∫–∞):**
   ```bash
   git rm --cached .env
   git commit -m "Remove .env from git tracking"
   git push
   ```

3. **–û—á–∏—Å—Ç–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é git (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
   ```bash
   # –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ –ø–µ—Ä–µ–ø–∏—à–µ—Ç –∏—Å—Ç–æ—Ä–∏—é!
   git filter-branch --force --index-filter \
     "git rm --cached --ignore-unmatch .env" \
     --prune-empty --tag-name-filter cat -- --all
   ```

4. **–û–±–Ω–æ–≤–∏—Ç–µ `.gitignore`** (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)

## üîë –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤:

### JWT Secrets (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞):

```bash
# Linux/Mac:
openssl rand -base64 32

# Windows PowerShell:
-join ((48..57) + (65..90) + (97..122) | Get-Random -Count 32 | % {[char]$_})
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ .env –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è:
git ls-files | grep .env
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ (–∫—Ä–æ–º–µ .env.example)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .gitignore:
git check-ignore .env
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: .env
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- [ ] `.env` —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –ù–ï –≤ git
- [ ] `.env.example` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω—ã (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤)
- [ ] –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Vercel –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ Environment Variables
- [ ] JWT secrets –∏–º–µ—é—Ç –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞
- [ ] `SUPABASE_SERVICE_ROLE_KEY` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –†–∞–∑–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è development –∏ production
- [ ] –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ (–º–µ–Ω—è–π—Ç–µ) —Å–µ–∫—Ä–µ—Ç—ã

## üõ°Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **RLS (Row Level Security)** –≤ Supabase - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
2. **Rate Limiting** - —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
3. **JWT —Ç–æ–∫–µ–Ω—ã** - —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
4. **HTTP-only cookies** - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - —á–µ—Ä–µ–∑ Zod —Å—Ö–µ–º—ã

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞** –≤ Supabase Dashboard
3. **–û—Ç–∑–æ–≤–∏—Ç–µ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
4. **–û–±–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

- ‚úÖ `.gitignore` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ `.env.example` —Å–æ–∑–¥–∞–Ω (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤)
- ‚úÖ `.env` —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ git tracking
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `lib/env.ts`

